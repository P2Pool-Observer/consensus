# P2Pool Consensus

This repository contains a consensus-compatible reimplementation of a P2Pool internals for [Monero P2Pool](https://github.com/SChernykh/p2pool) decentralized pool.

Other general tools to work with Monero cryptography are also included.

You may be looking for [P2Pool Observer](https://git.gammaspectra.live/P2Pool/observer) instead.

## Reporting issues

You can give feedback or report / discuss issues on:
* [The issue tracker on git.gammaspectra.live/P2Pool/consensus](https://git.gammaspectra.live/P2Pool/consensus/issues?state=open)
* Via IRC on [#p2pool-log@libera.chat](ircs://irc.libera.chat/#p2pool-log), or via [Matrix](https://matrix.to/#/#p2pool-log:monero.social)

## Libraries in this package

| Path                                   |      Status      |                                                                                             Documentation                                                                                             | Description                                                                                                                                                                       |
|:---------------------------------------|:----------------:|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------:|:----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| merge_mining                           |  In development  |                 [![Go Reference](https://pkg.go.dev/badge/git.gammaspectra.live/P2Pool/consensus/v5.svg)](https://pkg.go.dev/git.gammaspectra.live/P2Pool/consensus/v5/merge_mining)                  | Implements the [Merge Mining format and API](https://github.com/SChernykh/p2pool/blob/master/docs/MERGE_MINING.MD).                                                               |
| monero/address                         |   ✅ Supported    |                [![Go Reference](https://pkg.go.dev/badge/git.gammaspectra.live/P2Pool/consensus/v5.svg)](https://pkg.go.dev/git.gammaspectra.live/P2Pool/consensus/v5/monero/address)                 | Implements Monero Cryptonote address decoding/encoding, and generation of Transaction Proofs                                                                                      |
| monero/address/carrot                  |  In development  |             [![Go Reference](https://pkg.go.dev/badge/git.gammaspectra.live/P2Pool/consensus/v5.svg)](https://pkg.go.dev/git.gammaspectra.live/P2Pool/consensus/v5/monero/address/carrot)             | Implements [Carrot](https://github.com/jeffro256/carrot/blob/master/carrot.md) addressing protocol.                                                                               |
| monero/address/cryptonote              |  In development  |           [![Go Reference](https://pkg.go.dev/badge/git.gammaspectra.live/P2Pool/consensus/v5.svg)](https://pkg.go.dev/git.gammaspectra.live/P2Pool/consensus/v5/monero/address/cryptonote)           | Implements legacy [CryptoNote subaddress protocol](https://www.getmonero.org/resources/research-lab/pubs/MRL-0006.pdf).                                                           |
| monero/address/wallet                  |  Semi-Internal   |             [![Go Reference](https://pkg.go.dev/badge/git.gammaspectra.live/P2Pool/consensus/v5.svg)](https://pkg.go.dev/git.gammaspectra.live/P2Pool/consensus/v5/monero/address/wallet)             | Implements generic View Wallet and Spend Wallet for Legacy Cryptonote and Carrot addressing protocols.                                                                            |
| monero/block                           |   ✅ Supported    |                 [![Go Reference](https://pkg.go.dev/badge/git.gammaspectra.live/P2Pool/consensus/v5.svg)](https://pkg.go.dev/git.gammaspectra.live/P2Pool/consensus/v5/monero/block)                  | Supports decoding/encoding Monero Blocks with V2 Coinbase Transactions, calculating RandomX proof of work, calculating rewards.                                                   |
| monero/client                          |   ✅ Supported    |                 [![Go Reference](https://pkg.go.dev/badge/git.gammaspectra.live/P2Pool/consensus/v5.svg)](https://pkg.go.dev/git.gammaspectra.live/P2Pool/consensus/v5/monero/client)                 | Monero RPC and ZMQ-Pub clients.                                                                                                                                                   |
| monero/crypto                          |   ✅ Supported    |                 [![Go Reference](https://pkg.go.dev/badge/git.gammaspectra.live/P2Pool/consensus/v5.svg)](https://pkg.go.dev/git.gammaspectra.live/P2Pool/consensus/v5/monero/crypto)                 | General Monero cryptography data types, generators and hashers. Keccak256, Blake2b, merkle trees, signatures, hash to point and key images.                                       |
| monero/crypto/curve25519               |   ✅ Supported    |           [![Go Reference](https://pkg.go.dev/badge/git.gammaspectra.live/P2Pool/consensus/v5.svg)](https://pkg.go.dev/git.gammaspectra.live/P2Pool/consensus/v5/monero/crypto/curve25519)            | Specialized Ed25519/X25519 implementation for Monero, with performant constant and variable time implementations.                                                                 |
| monero/crypto/ringct                   |   ✅ Supported    |             [![Go Reference](https://pkg.go.dev/badge/git.gammaspectra.live/P2Pool/consensus/v5.svg)](https://pkg.go.dev/git.gammaspectra.live/P2Pool/consensus/v5/monero/crypto/ringct)              | RingCT general data types and original ring signatures.                                                                                                                           |
| monero/crypto/borromean                | ✅ Supported port |        [![Go Reference](https://pkg.go.dev/badge/git.gammaspectra.live/P2Pool/consensus/v5.svg)](https://pkg.go.dev/git.gammaspectra.live/P2Pool/consensus/v5/monero/crypto/ringct/borromean)         | Borromean range proofs. Only verification supported.                                                                                                                              |
| monero/crypto/bulletproofs             | ✅ Supported port |       [![Go Reference](https://pkg.go.dev/badge/git.gammaspectra.live/P2Pool/consensus/v5.svg)](https://pkg.go.dev/git.gammaspectra.live/P2Pool/consensus/v5/monero/crypto/ringct/bulletproofs)       | [Bulletproofs](https://eprint.iacr.org/2017/1066.pdf) and [Bulletproofs+](https://eprint.iacr.org/2020/735) range proofs.                                                         |
| monero/crypto/clsag                    | ✅ Supported port |          [![Go Reference](https://pkg.go.dev/badge/git.gammaspectra.live/P2Pool/consensus/v5.svg)](https://pkg.go.dev/git.gammaspectra.live/P2Pool/consensus/v5/monero/crypto/ringct/clsag)           | Implements [CLSAG RingCT](https://eprint.iacr.org/2019/654) ring signature scheme.                                                                                                |
| monero/crypto/mlsag                    | ✅ Supported port |          [![Go Reference](https://pkg.go.dev/badge/git.gammaspectra.live/P2Pool/consensus/v5.svg)](https://pkg.go.dev/git.gammaspectra.live/P2Pool/consensus/v5/monero/crypto/ringct/mlsag)           | Implements [MLSAG RingCT](https://www.getmonero.org/resources/research-lab/pubs/MRL-0005.pdf) ring signature scheme.                                                              |
| monero/crypto/generalized-bulletproofs |  In Development  | [![Go Reference](https://pkg.go.dev/badge/git.gammaspectra.live/P2Pool/consensus/v5.svg)](https://pkg.go.dev/git.gammaspectra.live/P2Pool/consensus/v5/monero/crypto/ringct/generalized-bulletproofs) |                                                                                                                                                                                   |
| monero/crypto/fcmp-plus-plus           |  In Development  |      [![Go Reference](https://pkg.go.dev/badge/git.gammaspectra.live/P2Pool/consensus/v5.svg)](https://pkg.go.dev/git.gammaspectra.live/P2Pool/consensus/v5/monero/crypto/ringct/fcmp-plus-plus)      |                                                                                                                                                                                   |
| monero/proofs                          |   ✅ Supported    |                 [![Go Reference](https://pkg.go.dev/badge/git.gammaspectra.live/P2Pool/consensus/v5.svg)](https://pkg.go.dev/git.gammaspectra.live/P2Pool/consensus/v5/monero/proofs)                 | Implements Monero proofs, for generating and verifying Transaction proofs, Spend proofs.                                                                                          |
| monero/randomx                         |   ✅ Supported    |                 [![Go Reference](https://pkg.go.dev/badge/git.gammaspectra.live/P2Pool/consensus/v5.svg)](https://pkg.go.dev/git.gammaspectra.live/P2Pool/consensus/v5/monero/proofs)                 | Implements [RandomX](https://github.com/tevador/RandomX/blob/master/doc/specs.md) proof of work, with pure Go implementation and optional C library.                              |
| monero/transaction                     |   ✅ Supported    |              [![Go Reference](https://pkg.go.dev/badge/git.gammaspectra.live/P2Pool/consensus/v5.svg)](https://pkg.go.dev/git.gammaspectra.live/P2Pool/consensus/v5/monero/transaction)               | Allows decoding/encoding and verifying transactions from binary, along its proofs on V1 and V2 transactions for all supported ring signatures and range proofs. Supports pruning. |
| p2pool/mempool                         |   ✅ Supported    |                [![Go Reference](https://pkg.go.dev/badge/git.gammaspectra.live/P2Pool/consensus/v5.svg)](https://pkg.go.dev/git.gammaspectra.live/P2Pool/consensus/v5/p2pool/mempool)                 | Mempool selection algorithm for P2Pool.                                                                                                                                           |
| p2pool/p2p                             |   ✅ Supported    |                  [![Go Reference](https://pkg.go.dev/badge/git.gammaspectra.live/P2Pool/consensus/v5.svg)](https://pkg.go.dev/git.gammaspectra.live/P2Pool/consensus/v5/p2pool/p2p)                   | P2Pool Consensus P2P implementation. For go-p2pool.                                                                                                                               |
| p2pool/sidechain                       |   ✅ Supported    |               [![Go Reference](https://pkg.go.dev/badge/git.gammaspectra.live/P2Pool/consensus/v5.svg)](https://pkg.go.dev/git.gammaspectra.live/P2Pool/consensus/v5/p2pool/sidechain)                | P2Pool Consensus SideChain. For go-p2pool.                                                                                                                                        |
| p2pool/stratum                         |   ✅ Supported    |                [![Go Reference](https://pkg.go.dev/badge/git.gammaspectra.live/P2Pool/consensus/v5.svg)](https://pkg.go.dev/git.gammaspectra.live/P2Pool/consensus/v5/p2pool/stratum)                 | P2Pool Stratum implementation, supporting multiple addresses. For go-p2pool.                                                                                                      |
| types                                  |   ✅ Supported    |                     [![Go Reference](https://pkg.go.dev/badge/git.gammaspectra.live/P2Pool/consensus/v5.svg)](https://pkg.go.dev/git.gammaspectra.live/P2Pool/consensus/v5/types)                     | General data types to work with 256-bit hashes or other fixed bytes, proof of work checking and 128-bit network difficulty.                                                       |
| utils                                  |  Semi-Internal   |                     [![Go Reference](https://pkg.go.dev/badge/git.gammaspectra.live/P2Pool/consensus/v5.svg)](https://pkg.go.dev/git.gammaspectra.live/P2Pool/consensus/v5/utils)                     | Utilities to decode or work with general types.                                                                                                                                   |

### Support Status Description
* **Supported**: Fully supported, maintained, and regularly/automatically tested. They are built for external consumption. Will follow the semver of the main package.
* **Supported port**: Fully supported, maintained, and regularly/automatically tested. They are built for external consumption. Will follow the semver of the main package. These were ported from [monero-oxide](https://github.com/monero-oxide/monero-oxide), unless specified.
* **Semi-Internal**: Supported, within the scope of this project/library usage. Not to be used independently.
* **Internal**: Not supported when used externally. Supported within the package.
* **In Development**: Currently in development or not finished. It is not guaranteed to not break, even across minor patches. Use at your own discretion.

## Other maintained external libraries

| Package                                                             |     Status     | Description                                                                                                                                                                                  |
|:--------------------------------------------------------------------|:--------------:|:---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [go-p2pool](https://git.gammaspectra.live/P2Pool/go-p2pool)         |  ✅ Supported   | Alternative P2Pool implementation in Go. Supports full consensus and mining, with similar arguments. Able to run P2Pool seed nodes.                                                          |
| [go-randomx](https://git.gammaspectra.live/P2Pool/go-randomx)       |  ✅ Supported   | Implements pure Go [RandomX](https://github.com/tevador/RandomX/blob/master/doc/specs.md), with JIT for amd64 and native support for more architectures, and purego implementation for WASM. |
| [edwards25519](https://git.gammaspectra.live/P2Pool/edwards25519)   |  ✅ Supported   | Implements the edwards25519 elliptic curve, with extensions to support Monero operations efficiently.                                                                                        |
| [helioselene](https://git.gammaspectra.live/P2Pool/helioselene)     | In Development | Implements Helio-Selene, Elliptic curve tower-cycle for Curve25519. Efficient implementation using formally proven field element operations.                                                 |
| [monero-base58](https://git.gammaspectra.live/P2Pool/monero-base58) |  ✅ Supported   | Efficient Monero's Base58 encoder/decoder.                                                                                                                                                   |


## Donations
This project is provided for everyone to use, for free. Any support is appreciated.

Donate to support this project, its development, and running the Observer Instances on [4AeEwC2Uik2Zv4uooAUWjQb2ZvcLDBmLXN4rzSn3wjBoY8EKfNkSUqeg5PxcnWTwB1b2V39PDwU9gaNE5SnxSQPYQyoQtr7](monero:4AeEwC2Uik2Zv4uooAUWjQb2ZvcLDBmLXN4rzSn3wjBoY8EKfNkSUqeg5PxcnWTwB1b2V39PDwU9gaNE5SnxSQPYQyoQtr7?tx_description=P2Pool.Observer)

You can also use the OpenAlias `p2pool.observer` directly on the GUI.

### Development notes

This library supports both [Golang RandomX library](https://git.gammaspectra.live/P2Pool/go-randomx) and the [C++ RandomX counterpart](https://github.com/tevador/RandomX).

By default, the Golang library will be used. You can enable the C++ library if by using CGO and the compile tag `enable_randomx_library` and have it installed via the command below:
```bash
$ git clone --depth 1 --branch master https://github.com/tevador/RandomX.git /tmp/RandomX && cd /tmp/RandomX && \
    mkdir build && cd build && \
    cmake .. -DCMAKE_BUILD_TYPE=Release -D CMAKE_INSTALL_PREFIX:PATH=/usr && \
    make -j$(nproc) && \
    sudo make install && \
    cd ../ && \
    rm -rf /tmp/RandomX
```