{% extends "base.html" %}

{% block title %} - Average Share Time Calculator{% endblock %}

{% block content %}

<div style="text-align: center">
    <form action="/calculate-share-time" method="get">
        <h2>Average Share Time Calculator</h2>
        <p>
            This tool calculates your average expected time between shares on the pool at current difficulty.
            <br/>
            <small>Do note this time will vary (can get shares sooner, or later, even way later), depending on your luck, and changing difficulty of the pool due to increase / reductions in hashrate.</small>
            <br/>
            For lower hashrate, this average is what statistically will be achieved long term.
        </p>
        <div>
            <label for="hashrate">Your Hashrate</label><br/>
            <input type="numeric" name="hashrate" id="hashrate" placeholder="100" size="8" class="mono" value="{% if hashrate > 0 %}{{ hashrate }}{% endif %}"/>
            <select name="magnitude">
                <option value="1"{% if magnitude == 1 %} selected{% endif %}>H/s</option>
                <option value="1000"{% if magnitude == 1000 %} selected{% endif %}>KH/s</option>
                <option value="1000000"{% if magnitude == 1000000 %} selected{% endif %}>MH/s</option>
                <option value="1000000000"{% if magnitude == 1000000000 %} selected{% endif %}>GH/s</option>
            </select>
        </div>
        <div style="margin-top: 10px">
            <input type="submit" value="Calculate" style="width: 20em;"/>
        </div>
    </form>
</div>



{% if hashrate > 0 %}
<hr/>
<div style="text-align: center">

    <table class="center" style="max-width: calc(15em + 15em + 15em + 15em);">
        {% set between = (diff_uint(pool.SideChain.Difficulty) / (hashrate * magnitude)) %}
        {% set between_main = (diff_uint(pool.SideChain.Difficulty) / (hashrate * magnitude)) %}
        <tr style="line-height: 1.5;">
            <td style="width: 15em"><strong>P2Pool Difficulty</strong><br/>{{ diff_uint(pool.SideChain.Difficulty)|si_units(2) }}</td>
            <td style="width: 15em"><strong>P2Pool Hashrate</strong><br/>{{ diff_hashrate(pool.SideChain.Difficulty, pool.SideChain.BlockTime)|si_units(2) }}H/s</td>
            <td style="width: 15em"><strong>Your Hashrate</strong><br/>{{ (hashrate * magnitude)|si_units(2) }}H/s</td>
            <td title="Mean frequency between P2Pool shares" style="width: 15em; border: #ff6600 dashed 1px;"><strong>Your Share Mean<br/>{{ time_duration_long(between) }}</strong></td>
        </tr>
        <tr><th colspan="4">&nbsp;</th></tr>
        <tr style="line-height: 1.5;">
            <td><strong>Monero Difficulty</strong><br/>{{ diff_uint(pool.MainChain.Difficulty)|si_units(2) }}</td>
            <td><strong>Monero Hashrate</strong><br/>{{ diff_hashrate(pool.MainChain.Difficulty, pool.MainChain.BlockTime)|si_units(2) }}H/s</td>
            <td title="Mean frequency between P2Pool finds Monero Blocks"><strong>P2Pool Block Mean</strong><br/><em>{{ time_duration_long(diff_uint(pool.MainChain.Difficulty) / diff_hashrate(pool.SideChain.Difficulty, pool.SideChain.BlockTime)) }}</em></td>
            <td title="Mean frequency between Solo Monero Blocks (without P2Pool)"><strong>Your Solo Block Mean</strong><br/><em>{{ time_duration_long(between_main) }}</em></td>
        </tr>
        <tr><th colspan="4">&nbsp;</th></tr>
        <tr style="line-height: 1.5;">
            <th>Found Effort</th>
            <th>Found Chance</th>
            <th>P2Pool Estimate</th>
            <th>Solo Estimate</th>
        </tr>

        {% for e in efforts %}
        <tr>
            <td style="font-size: 17px; font-weight:bolder; color: {{ e.Effort|effort_color }};">
                {{ e.Effort|round(2) }}%
            </td>
            <td title="Chance share is not found before: {{ (100 - e.Probability)|round(5) }}%">
                {{ e.Probability|round(5) }}%
            </td>
            <td>
                {{ time_duration_long(e.Between) }}
            </td>
            <td>
                {{ time_duration_long(e.BetweenSolo) }}
            </td>
        </tr>
        {% endfor %}
        <tr><td></td><td></td></tr>
    </table>
</div>
{% endif %}


{% endblock %}